# 直近で対応すべき修正

## 1. リリースビルドでホットキーが登録されない問題
- 現状の `KeyboardShortcutsDefaults.ensureDefaultIfNeeded()` は `#if DEBUG` ガードの内側で既定ショートカットを登録しているため、リリースビルドでは `Cmd + Shift + T` が設定されない。
- ホットキー設定UIが未提供の状態ではユーザーが手動で再設定できないため、起動直後にホットキーが動かない致命的な体験になる。
- 対応方針: `DEBUG` ガードを外し、初回のみ常に既定ショートカットを設定する。将来的にユーザー設定UIが入る場合も、初期値として登録される設計にしておく。

## 2. ホットキーのみで起動した際にメモが読み込まれない問題
- 現在 `MarkdownStore.shared.loadOnLaunch()` を呼んでいるのは `ContentView` の `onAppear` 内だけ。つまりポップオーバーを開かない限りディスクからメモを読み込まない。
- ユーザーがアプリ起動後にいきなりグローバルホットキーを押すと、オーバーレイに空のテキストが表示されてしまう。
- 対応方針: `applicationDidFinishLaunching`（または同等の起動直後フック）で `MarkdownStore.shared.loadOnLaunch()` を一度呼び、オーバーレイ・ポップオーバー双方が最新メモ状態になるようにする。必要なら AppDelegate から呼び出す。

## 参考
- 修正後は `AGENTS.md` のホットキー/オーバーレイ運用節にも反映し、初期ホットキーとロードタイミングの仕様を明記する。
