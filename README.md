# SattoPad

メニューバーに常駐し、いつでもサッと呼び出してメモできる、超シンプルな macOS 用メモアプリです。

- Dock 非表示のメニューバー常駐
- グローバルショートカットで表示/非表示を一瞬で切替
- シンプルな複数行メモ + バックグラウンドにプレビュー（オーバーレイ）
- Markdown ファイルへの自動保存と起動時の復元
- UI は最小限。書く→閉じるに集中

---

## 特徴（シンプルさ最優先）
- メニューバーからワンクリックでポップオーバーを開閉（ESC でも閉じる）
- グローバルショートカット（既定: Cmd + Shift + T）でトグル
- オーバーレイプレビュー（デスクトップ上に軽量ウィンドウ）
  - 背景の透明度のみ変更（テキストは常に不透明で読みやすい）
  - ポップオーバー表示中はドラッグで位置を移動
- 自動保存/読み込み（Markdown）
  - 既定パス: `~/Documents/SattoPad.md`
  - 入力変更を約 1 秒デバウンスしてアトミック保存
  - 次回起動時に自動復元
  - 保存先は 3 点メニューから変更可能

## 使い方
1) メニューバーのアイコンをクリック（またはショートカット）でポップオーバーを開く
2) メモを書く（右上 3 点メニューに各種操作）
3) 閉じる（右上の × または ESC）

- 透明度: ヘッダーのスライダーで 5%〜100% を調整（ラベルはスライダー上に中央表示）
- オーバーレイ移動: ポップオーバーを開いている間、オーバーレイ上の「Drag to move」付近をドラッグ

## 自動保存とファイル
- 既定の保存先: `~/Documents/SattoPad.md`
- 入力は約 1 秒後に自動保存（連続タイプ時の無駄書き込みを抑制）
- アプリ起動時に前回内容を自動復元
- 3 点メニュー
  - 保存先を選択…（フォルダ選択時は `SattoPad.md` を自動付与）
  - ファイルから再読み込み（未保存の変更がある場合は確認ダイアログ）
- 外部変更の検知
  - 未保存の変更がなければ自動リロード
  - 未保存がある場合は警告のみ表示

## ショートカット
- 既定: Cmd + Shift + T（表示/非表示）
- ホットキー設定
  - SPM の KeyboardShortcuts を導入済みの環境では、ヘッダーにレコーダーを表示（幅が狭い場合は 3 点メニューに格納）
  - 未導入の場合は Carbon のデフォルトホットキーで動作

## ビルド/実行
- macOS 12+ / Xcode 15 以降を推奨（SwiftUI）
- `SattoPad.xcodeproj` を Xcode で開き、Run
- メニューバーにアイコンが出現（Dock 非表示）。クリックでポップオーバーが開きます

## 設計メモ
- 保存はバックグラウンドキューで実行、UI 更新はメインスレッド
- 書き込みはアトミック、UTF-8（BOM 無し）
- サンドボックス配布を想定し、保存先はセキュリティスコープ付きブックマークで保持（非サンドボックスでも動作）

## 既知の制限 / 今後
- 外部編集の自動マージは非対応（必要に応じて「再読み込み」を実行）
- Markdown の高度なプレビュー（見出し/箇条書き等の拡張表現は最低限）
- 今後の予定
  - UI の磨き込み（余白/アニメーション/アクセシビリティ）
  - プレビューの強化（Markdown レンダリングの拡張）

## プライバシー
- すべてローカル保存。クラウドや外部送信は行いません。

---

シンプルに、すぐ書ける。SattoPad は「取り出す/書く/閉じる」を最速にします。
